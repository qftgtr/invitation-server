{"version":3,"sources":["components/common/ButtonOptions.jsx","Routes/Homepage/image.jpg","Routes/Homepage/index.jsx","Routes/Gift/index.jsx","Routes/Message/index.jsx","Routes/index.jsx","lib/redux/config.js","lib/redux/updateStore.js","lib/redux/index.js","lib/api/index.js","ReduxApp.jsx"],"names":["ButtonOptions","size","color","options","selected","className","onSelect","ButtonGroup","map","key","icon","text","Button","outline","onClick","classnames","connect","props","React","useState","setSelected","selected2","setSelected2","content","replace","user","get","src","image","to","Gift","Message","Routes","children","fallback","LoadingScreen","exact","path","component","Homepage","render","version","default","Map","persist","actions","SET_VERSION","reducer","state","payload","merge","SET_USER","_","updateStore","persistor","store","config","reduxConfig","serverUrl","this","apiBaseUrl","apiPath","params","a","request","redux","getState","endpoint","method","headers","Accept","token","Authorization","opts","FormData","body","JSON","stringify","qs","fetch","response","result","parse","e","status","dispatch","Error","message","process","lazy","ReduxApp","loaded","init","then","onReduxLoaded","Promise","resolve","setInterval","setState","PureComponent","api","id"],"mappings":"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","file":"static/js/components.337832d4.chunk.js","sourcesContent":["import React from 'react'\nimport classnames from 'classnames'\n\nimport {\n  Button,\n  ButtonGroup,\n} from 'reactstrap'\n\nexport default function ButtonOptions ({ size, color, options, selected, className = 'mb-2', onSelect }) {\n  return (\n    <ButtonGroup size={size} className={className}>\n      {options.map(({ key, icon, text }) => (\n        <Button\n          key={`option-${key}`}\n          color={color}\n          outline={selected !== key}\n          onClick={() => onSelect(key)}\n        >\n          {icon ? <i className={classnames(icon, 'mr-2')} /> : null}\n          {text}\n        </Button>\n      ))}\n    </ButtonGroup>\n  )\n}","export default __webpack_public_path__ + \"static/media/image.f2a07b15.jpg\";","import React from 'react'\n\nimport { connect } from '@obsidians/redux'\n\nimport ReactMarkdown from 'react-markdown'\nimport { NavLink } from 'react-router-dom'\nimport ButtonOptions from '~/common/ButtonOptions'\n\nimport image from './image.jpg'\n\nconst tamplate = `# 李泽昊和吕唯的婚礼请柬\n\n- 亲爱的 **##name**\n\n李泽昊和吕唯的婚礼将于2021年5月9日在北京华尔道夫四合院举行。这会是一场穿越古今，横贯中西的神奇婚礼。我们诚挚邀请您作为我们最挚爱的亲朋来见证我们人生中最终要的时刻。\n\n*（身在海外因疫情无法回国的亲友们别慌，我们届时将在B站进行婚礼直播，您可以通过线上参与，记得多刷弹幕！）*\n\n### 婚礼日程：\n\n- 上午9:00  婚礼仪式 @ 华尔道夫四合院\n- 上午11:00 午宴 @华尔道夫主楼宴会厅\n- 晚上8:00  鸡尾酒会 @华尔道夫四合院\n\n（酒会仅邀请年轻的朋友参加，这里会有北京的夜色+酒精+音乐+一群有意思的人，希望我们的朋友也都可以彼此成为朋友）\n\n*备注：因为婚礼现场停车位有限，请年轻的朋友们尽量打车出行，将车位留给长辈们*\n`\nconst options = [\n  { key: 'go', icon: 'fad fa-file-signature', text: '确认出席' },\n  { key: 'nogo', icon: 'fad fa-user-alt-slash', text: '无法参加' },\n  { key: 'online', icon: 'fad fa-globe', text: '线上参加' },\n]\n\nexport default connect(['user'])(function Homepage (props) {\n  const [selected, setSelected] = React.useState('confirm')\n  const [selected2, setSelected2] = React.useState('confirm')\n\n  const content = tamplate.replace('##name', props.user.get('name'))\n  return (\n    <div className='overflow-auto'>\n      <div className='container'>\n        <img src={image} className='w-100' />\n        <ReactMarkdown>\n          {content}\n        </ReactMarkdown>\n        <div>\n          <h2>婚礼仪式+午宴</h2>\n          <ButtonOptions\n            color='primary'\n            options={options}\n            selected={selected}\n            onSelect={setSelected}\n          />\n        </div>\n        <div>\n          <h2>鸡尾酒会</h2>\n          <ButtonOptions\n            color='primary'\n            options={options}\n            selected={selected2}\n            onSelect={setSelected2}\n          />\n        </div>\n        <NavLink to='/gift' className='btn btn-primary'>下一步</NavLink>\n      </div>\n    </div>\n  )\n})\n","import React from 'react'\n\nimport ReactMarkdown from 'react-markdown'\nimport { NavLink } from 'react-router-dom'\n\nconst content = `# 李泽昊和吕唯的婚礼请柬\n\n纪念品\n\n### 为了分享和纪念这个的幸福时刻，我们借助区块链技术发行了“Wiki币”，并赠送给您一枚。\n\n- 为您自动生成的“Wiki币”的公钥及私钥地址如下，请您妥善保存（抄在小纸条上，纹在身上，或者手机截屏都可以）：\n- 以后李泽昊或者是吕唯如果成为了厉害的人物，一枚“Wiki币”也许可以帮助你移民火星。：\n\n### 请您写下您对我们的祝福，这些话语也将永远被记载在区块链上。\n`\n\nexport default function Gift (props) {\n  return (\n    <div className='overflow-auto'>\n      <div className='container'>\n        <ReactMarkdown>\n            {content}\n        </ReactMarkdown>\n        <div>\n            <textarea>asdfasdf</textarea>\n        </div>\n        <NavLink to='/message' className='btn btn-primary'>下一步</NavLink>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport ReactMarkdown from 'react-markdown'\n\nconst content = `# 李泽昊和吕唯的婚礼请柬\n\n李泽昊和吕唯对你说的悄悄话： \n\n> 悄悄话悄悄话悄悄话悄悄话悄悄话悄悄话悄悄话\n> 悄悄话悄悄话悄悄话悄悄话悄悄话悄悄话悄悄话\n`\n\nexport default function Message (props) {\n  return (\n    <div className='overflow-auto'>\n      <div className='container'>\n        <ReactMarkdown>\n          {content}\n        </ReactMarkdown>\n      </div>\n    </div>\n  )\n}\n","import React, { Suspense } from 'react'\n\nimport { Route, Redirect } from 'react-router-dom'\nimport CacheRoute, { CacheSwitch } from 'react-router-cache-route'\n\nimport LoadingScreen from '~/common/LoadingScreen'\n\nimport Homepage from './Homepage'\nimport Gift from './Gift'\nimport Message from './Message'\n\nexport default function Routes (props) {\n  return (\n    <>\n      {props.children}\n      <Suspense fallback={<LoadingScreen />}>\n        <CacheSwitch>\n          <Route\n            exact\n            path='/'\n            component={Homepage}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route\n            exact\n            path='/gift'\n            component={Gift}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route\n            exact\n            path='/message'\n            component={Message}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route render={() => <Redirect to='/' />} />\n        </CacheSwitch>\n      </Suspense>\n      <Route\n        component={() => null}\n        className='border-top-1 d-flex flex-row'\n      />\n    </>\n  )\n}\n","import Immutable, { List, Map } from 'immutable'\n\nexport const version = {\n  default: Map({}),\n  persist: true,\n  actions: {\n    SET_VERSION: {\n      reducer: (state, { payload }) => state.merge(payload)\n    }\n  }\n}\n\nexport const user = {\n  default: Map({}),\n  persist: true,\n  actions: {\n    SET_USER: {\n      reducer: (_, { payload }) => Map(payload)\n    }\n  }\n}","export default function updateStore ({ persistor, store, actions }) {\n  // Data structure upgrade\n  // store.dispatch(actions.__UPGRADE_DATA())\n\n  // Data version upgrade\n  // store.dispatch(actions.__UPGRADE_VERSION())\n}\n","import * as reduxConfig from './config'\n\nexport const config = reduxConfig\nexport { default as updateStore } from './updateStore'\n","import qs from 'qs'\nimport redux from '@obsidians/redux'\n\nclass HttpClient {\n  constructor (serverUrl) {\n    this.apiBaseUrl = `${serverUrl}/api/v1`\n  }\n\n  async get (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'GET', params)\n  }\n\n  async post (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'POST', params)\n  }\n\n  async put (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'PUT', params)\n  }\n\n  async delete (apiPath) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'DELETE')\n  }\n\n  loggedIn () {\n    return !!redux.getState().user.get('token')\n  }\n\n  async request (endpoint, method, params) {\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    }\n    const token = redux.getState().user.get('token')\n    if (token) {\n      headers.Authorization = `Bearer ${token}`\n    }\n    const opts = { headers, method }\n    if (method === 'POST' || method === 'PUT' || method === 'DELETE') {\n      if (params instanceof FormData) {\n        opts.body = params\n        delete headers['Content-Type']\n      } else {\n        opts.body = JSON.stringify(params)\n      }\n    } else if (method === 'GET' && params) {\n      endpoint += `?` + qs.stringify(params)\n    }\n\n    const response = await fetch(endpoint, opts)\n\n    let result = await response.text()\n    try {\n      result = JSON.parse(result)\n    } catch (e) {}\n\n    if (response.status === 401) {\n      redux.dispatch('USER_LOGOUT')\n      throw new Error(result.message || 'Need login to perform this operation.')\n    } else if (response.status >= 400) {\n      throw new Error(result.message || result)\n    }\n    return result\n  }\n}\n\nexport default new HttpClient(process.env.REACT_APP_SERVER_URL)","import React, { PureComponent, lazy } from 'react'\n\nimport redux, { Provider } from '@obsidians/redux'\n\nimport { config, updateStore } from '@/redux'\nimport api from '@/api'\n\nimport LoadingScreen from '~/common/LoadingScreen'\n\nconst Routes = lazy(() => import('./Routes' /* webpackChunkName: \"components\" */))\n\nexport default class ReduxApp extends PureComponent {\n  state = {\n    loaded: false,\n  }\n\n  async componentDidMount () {\n    await redux.init(config, updateStore).then(onReduxLoaded)\n    await new Promise(resolve => setInterval(resolve, 1000))\n    this.setState({ loaded: true })\n  }\n\n  render () {\n    if (!this.state.loaded) {\n      return <LoadingScreen />\n    }\n\n    return (\n      <Provider store={redux.store}>\n        <div className='body'>\n          <Routes />\n        </div>\n      </Provider>\n    )\n  }\n}\n\nasync function onReduxLoaded (state) {\n  redux.dispatch('SET_VERSION', { version: '0.1.0' })\n  const user = await api.get('user', { id: 'xxx' })\n  redux.dispatch('SET_USER', user)\n}\n"],"sourceRoot":""}