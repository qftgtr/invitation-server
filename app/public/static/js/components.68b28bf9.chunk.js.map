{"version":3,"sources":["components/common/ButtonOptions.jsx","Pages/Homepage/image.jpg","Pages/Homepage/index.jsx","Pages/images/bg1.png","Pages/images/bg2.png","Pages/images/photo.png","Pages/images/bg3.png","Pages/images/button.png","Pages/images/bg4.png","Pages/images/page5.png","Pages/index.jsx","Pages/images/button-active.png","lib/redux/config.js","lib/redux/updateStore.js","lib/redux/index.js","lib/api/index.js","ReduxApp.jsx"],"names":["ButtonOptions","size","color","options","selected","className","onSelect","ButtonGroup","map","key","icon","text","Button","outline","onClick","classnames","connect","props","React","useState","setSelected","selected2","setSelected2","content","replace","user","get","src","image","to","Routes","useEffect","Pageable","id","data-anchor","style","backgroundImage","bg1","photo","bg2","bg3","button","type","placeholder","bg4","page5","version","default","Map","persist","actions","SET_VERSION","reducer","state","payload","merge","SET_USER","_","updateStore","persistor","store","config","reduxConfig","serverUrl","this","apiBaseUrl","apiPath","params","a","request","redux","getState","endpoint","method","headers","Accept","token","Authorization","opts","FormData","body","JSON","stringify","qs","fetch","response","result","parse","e","status","dispatch","Error","message","process","Pages","lazy","ReduxApp","loaded","init","then","onReduxLoaded","Promise","resolve","setInterval","setState","LoadingScreen","PureComponent","api"],"mappings":"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","file":"static/js/components.68b28bf9.chunk.js","sourcesContent":["import React from 'react'\nimport classnames from 'classnames'\n\nimport {\n  Button,\n  ButtonGroup,\n} from 'reactstrap'\n\nexport default function ButtonOptions ({ size, color, options, selected, className = 'mb-2', onSelect }) {\n  return (\n    <ButtonGroup size={size} className={className}>\n      {options.map(({ key, icon, text }) => (\n        <Button\n          key={`option-${key}`}\n          color={color}\n          outline={selected !== key}\n          onClick={() => onSelect(key)}\n        >\n          {icon ? <i className={classnames(icon, 'mr-2')} /> : null}\n          {text}\n        </Button>\n      ))}\n    </ButtonGroup>\n  )\n}","export default __webpack_public_path__ + \"static/media/image.f2a07b15.jpg\";","import React from 'react'\n\nimport { connect } from '@obsidians/redux'\n\nimport ReactMarkdown from 'react-markdown'\nimport { NavLink } from 'react-router-dom'\nimport ButtonOptions from '~/common/ButtonOptions'\n\nimport image from './image.jpg'\n\nconst tamplate = `# 李泽昊和吕唯的婚礼请柬\n\n- 亲爱的 **##name**\n\n李泽昊和吕唯的婚礼将于2021年5月9日在北京华尔道夫四合院举行。这会是一场穿越古今，横贯中西的神奇婚礼。我们诚挚邀请您作为我们最挚爱的亲朋来见证我们人生中最终要的时刻。\n\n*（身在海外因疫情无法回国的亲友们别慌，我们届时将在B站进行婚礼直播，您可以通过线上参与，记得多刷弹幕！）*\n\n### 婚礼日程：\n\n- 上午9:00  婚礼仪式 @ 华尔道夫四合院\n- 上午11:00 午宴 @华尔道夫主楼宴会厅\n- 晚上8:00  鸡尾酒会 @华尔道夫四合院\n\n（酒会仅邀请年轻的朋友参加，这里会有北京的夜色+酒精+音乐+一群有意思的人，希望我们的朋友也都可以彼此成为朋友）\n\n*备注：因为婚礼现场停车位有限，请年轻的朋友们尽量打车出行，将车位留给长辈们*\n`\nconst options = [\n  { key: 'go', icon: 'fad fa-file-signature', text: '确认出席' },\n  { key: 'nogo', icon: 'fad fa-user-alt-slash', text: '无法参加' },\n  { key: 'online', icon: 'fad fa-globe', text: '线上参加' },\n]\n\nexport default connect(['user'])(function Homepage (props) {\n  const [selected, setSelected] = React.useState('confirm')\n  const [selected2, setSelected2] = React.useState('confirm')\n\n  const content = tamplate.replace('##name', props.user.get('name'))\n  return (\n    <div className='overflow-auto'>\n      <div className='container'>\n        <img src={image} className='w-100' />\n        <ReactMarkdown>\n          {content}\n        </ReactMarkdown>\n        <div>\n          <h2>婚礼仪式+午宴</h2>\n          <ButtonOptions\n            color='primary'\n            options={options}\n            selected={selected}\n            onSelect={setSelected}\n          />\n        </div>\n        <div>\n          <h2>鸡尾酒会</h2>\n          <ButtonOptions\n            color='primary'\n            options={options}\n            selected={selected2}\n            onSelect={setSelected2}\n          />\n        </div>\n        <NavLink to='/gift' className='btn btn-primary'>下一步</NavLink>\n      </div>\n    </div>\n  )\n})\n","export default __webpack_public_path__ + \"static/media/bg1.e761d404.png\";","export default __webpack_public_path__ + \"static/media/bg2.56d4fbe9.png\";","export default __webpack_public_path__ + \"static/media/photo.46dffba4.png\";","export default __webpack_public_path__ + \"static/media/bg3.d2c21f99.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMcAAAB3CAYAAAC3z1SzAAAACXBIWXMAAAsSAAALEgHS3X78AAAE20lEQVR4nO3aTU9jVRzH8d+l5WF4cGAcRxwTB5PRhcYMmrhxMyQudTG+Amvi3nkFDdNXMG7ciu8AtyZmWGtiIOrChcqMESMM0FJooU/HHGhN6Tn/DsSF9PL9JJ2k94HpTfrlnHMviXNO51VIkjlJc+c+Efh/FPPOrZ73fz5THIUkuSfJvxYk3QoOAAbDY0krkpbzzi3/pzgKSZKTtEgQSCEfymLeuSXr0qJxFJJk2tcl6W6wE0iXNUm52LQriKOQJPPtoecqXwJcEiW/ZOgN5FQcZw3jxYlRjWYywXbgonqyV3nWJwsC+TeO9lRqNba+GMsO6a0Xruqd2WnNjI0EPxUYBAe1hta2SvpuY0eHjVbsE/tA5vPOrfs32a4dD2NhvH5tUh/efkkjmaHgJwGDZGIkq/defl7vzs7om9839eNWqffT+xnTUvuu7MnIUUgS/+ZR75F+tPjg9ixfAKTSt+ub+v6v3dilfeRv9XaGg1zvXr+uIAyk2ftzN45nRhH+8YWSB5JfawT5fHpnTtfHR8PTgBSpNVv64odfY2uQt4faT75P8TURBi4Dv5Z+bWYqdqX3fBzzvVtfnZ4IjgTS6o3r0TgWonHcnBwLjgTSyq+vI6aj92ejG4GUGh/Oxi7sDh0ABuIADMQBGIgDMBAHYCAOwEAcgIE4AANxAAbiAAzEARiIAzAQB2AgDsBAHICBOAADcQAG4gAMxAEYiAMwEAdgIA7AQByAgTgAA3EABuIADMQBGIgDMBAHYCAOwEAcgIE4AANxAAbiAAzEARiIAzAQB2AgDsBAHICBOAADcQAG4gAMxAEYiAMwEAdgIA7AQByAgTgAA3EABuIADMQBGIgDMBAHYCAOwEAcgIE4AANxAAbiAAzEARiIAzAQB2AgDsBAHICBOAADcQAG4gAMxAEYiAMwEAdgIA7AQByAgTgAA3EABuIADMQBGIgDMBAHYCAOwBCNo9ZqBduAtNqtHkWvLBrHn3uVYBuQVuVaLXpl8TjKFTVbLtgOpNEfxf3oVUXjqDdb2tw/CLYDaeO/59VGI3pV0Ti8jb2yitXDYDuQFtV6XRt78VGjbxze+m5J25VqsB0YdOWjmn7Z2lGzz82nbLCliz9xfaeo8tGRbj43pZFMJjgGGCS1ZlN/lw/OtGzoG0fH9kH1+DU+PKzJ0RFlh/oOOMCF5H/J+xHjrM4UR0elXj9+AZcBQwBgIA7AQByAgThw6ZVr0du5JR9HsXfr7lH8iSGQRuV6M3ZVqz6OlTCOpqqNaE1AqjRaTpvV6GAQj8P7bS/+Z7xAmjwu144DiVgZyju36o/p3bdxUGd6hVTz06kn+9GHgqW8c8udBflisNuPK0+r1nwMGGh+tPh5+9AaNR76fxLnTnYWkmRd0q3eo7JDid68dkU3rpzrYTpwYfkZ0U87hzqMr6tLkubyzhW7v/E5SY96j/RlrT2taGY0o1emRokEA+t4GlWuHS8Z+sj5MNQ9cuhk9PCBfGmfd8KHAgyScr1lTaG6fZ537n7n/ak42oH4+dZnwWlAun2Vdy7XfYXBE/J2OZ+0517AZfCgN4zoyNE1gsxJWpJ0N9gJpMOapPt556LP+sw4uiJZaC/WPw52AoPpa/+L3z/L6PfpnxlHJJR5SdPBTuDi8yPEauduVF+S/gFLMHWrjJp6pgAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/bg4.29bc6d5e.png\";","export default __webpack_public_path__ + \"static/media/page5.62a390af.png\";","import React, { Suspense } from 'react'\n\nimport { Route, Redirect } from 'react-router-dom'\nimport CacheRoute, { CacheSwitch } from 'react-router-cache-route'\n\nimport Pageable from 'pageable'\n\nimport LoadingScreen from '~/common/LoadingScreen'\n\nimport Homepage from './Homepage'\nimport Gift from './Gift'\nimport Message from './Message'\n\nimport bg1 from './images/bg1.png'\n\nimport bg2 from './images/bg2.png'\nimport photo from './images/photo.png'\n\nimport bg3 from './images/bg3.png'\nimport button from './images/button.png'\nimport buttonActive from './images/button-active.png'\n\nimport bg4 from './images/bg4.png'\nimport page5 from './images/page5.png'\n\nexport default function Routes (props) {\n  React.useEffect(() => {\n    new Pageable('#container')\n  }, [])\n\n  return (\n    <div id=\"container\">\n      <div data-anchor='Page 1'>\n        <div style={{ backgroundImage: `url(${bg1})` }} className='page-bg-image' />\n      </div>\n      <div data-anchor='Page 2'>\n        <div className='page'>\n          <div style={{ backgroundImage: `url(${photo})` }} className='photo' />\n          <div style={{ backgroundImage: `url(${bg2})` }} className='page-bg-image' />\n        </div>\n      </div>\n      <div data-anchor='Page 3'>\n        <div style={{ backgroundImage: `url(${bg3})` }} className='page-bg-image'>\n          <div className='page3-content'>\n            <div className='button-group'>\n              <div style={{ backgroundImage: `url(${buttonActive})` }} className='button button-active'>\n                确认出席\n              </div>\n              <div style={{ backgroundImage: `url(${button})` }} className='button'>\n                暂不确定\n              </div>\n              <div style={{ backgroundImage: `url(${button})` }} className='button'>\n                无法参加/线上参加\n              </div>\n            </div>\n            <input type='text' className='input' placeholder='联系方式（手机号）' />\n          </div>\n        </div>\n      </div>\n      <div data-anchor='Page 4'>\n        <div style={{ backgroundImage: `url(${bg4})` }} className='page-bg-image' />\n      </div>\n      <div data-anchor='Page 5'>\n        <div style={{ backgroundImage: `url(${page5})` }} className='page-bg-image' />\n      </div>\n    </div>\n  )\n  return (\n    <>\n      {props.children}\n      <Suspense fallback={<LoadingScreen />}>\n        <CacheSwitch>\n          <Route\n            exact\n            path='/'\n            component={Homepage}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route\n            exact\n            path='/gift'\n            component={Gift}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route\n            exact\n            path='/message'\n            component={Message}\n            className='p-relative w-100 h-100 bg-light'\n          />\n          <Route render={() => <Redirect to='/' />} />\n        </CacheSwitch>\n      </Suspense>\n      <Route\n        component={() => null}\n        className='border-top-1 d-flex flex-row'\n      />\n    </>\n  )\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAB3CAYAAABGxA8+AAAACXBIWXMAAAsSAAALEgHS3X78AAAE3ElEQVR4nO3aTWgcZRzH8f+z2c0GW7NLJVKlNoG2l5BDBC+eEnvoQRAqeBA8JAjiNZ4ED0vYgzdpevbSngr10h600IPUgyhekkDxEgPJwZI2KGltbd4feYaZNpmXX2sUmp39fmBJsjOTsOH58jzPzjrvvR1E27nxA10IvAAt728d5K8+VyBt54bM7Hz8GMucAHSOH8zsWni0vF/6T4HEYUyb2UTmIND5LofxrUIpDKTt3KSZzZhZI3MQKJfPWt7P5L2i3EDazl1i1kCXudzyfjL9kivpJ4gDXWoiHvv77JtB2s5NmdmFov9Pf3/FRob77OSJWvR9o78ncw5w2GxseLu3uh09bv+6EX0VLra8n0oOPwmk7dyomc3mXVevOzs7diSKA+h0C4ubduPmX1E4Bd5J3hbeu8TK3aS8OlC1iY+axIHSOHOq1z79+Fg0tgtMJ09HgcSzR+b+Rpg5PvygwVIKpZOM7bBVyDGW3AhPjk5lzzF7/73+6BcBZY3k3XMvZ56PRe9oJYFkPjbyxola9ADKLIzxkeF63is8HwUS3y0fTB8tuAgondOncsd6I2w9wgwylDkUbWRyLwJKJ2zaCzRzdygWr8+AblGwWR/PfRboNkXv1BIIIBAIIBTeSlRczZkr3r4Ah45/tGv+78KPlhR67kAqAz1WPV2zykAlCgToRDt3dmz7ty3bXd35fwIJMdTeqlvP6/mbGKCThHEcHiGQzZ82zG/pWUWuk0IcvWN9xIHSCSuiMLaftRqSgfS+XbdKQ54CdKwwtkMkSuHo7xmsRpUBZRYiCWO9SGEg1TN8UBHdoTZc+FGT/ECax6ssrdA13EvOjg3mTwi5FTRfK55ygDJ6ZehfBAJ0m6MF+20CAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAQQCAczs7p3tvH/DUghkLf3s+sPdzJlAmd1d2Mx7dUuVlvdz6WdXFjZt67HPnA2U1Up+IHPJEut6+sgv3zzInA2U0e2bj/JWTfMt79eSQK6lj/545QGzCEovjPHvv87sMoJLlmzSW96HH5b3Hg1FXfn8XuYqoEy+u/Cnra1kNuj39wUSm06ftTS7ble/WGUmQemEMX39yz9s/sbDvJc2E5ZX4Rvn/dPB33bulpmNpc9uHq/a2U+aNnLuSOY3AZ1m8efH9u1XuTOHxXuP0eSHdCDNsHM3s8HMZWbWd7RiQ2/22cmRuvXVXeY4cFhtb5v9vrhpy7PrRWFYvLQabXm/lBtIHEmoJ8wkjczlQHmFOMbTtz0yd9LjE4bCVMNgQJeYj2eOzD3BzAyyV9u5sHGfYjZBSd2PN+SZN6gSMhB7ui8JkUwW7U2ADrMcv4375N2qIs8MJBVLWHqNxg+g04Ql1NzeTbhkZv8AR1gmkX/IKgwAAAAASUVORK5CYII=\"","import Immutable, { List, Map } from 'immutable'\n\nexport const version = {\n  default: Map({}),\n  persist: true,\n  actions: {\n    SET_VERSION: {\n      reducer: (state, { payload }) => state.merge(payload)\n    }\n  }\n}\n\nexport const user = {\n  default: Map({}),\n  persist: true,\n  actions: {\n    SET_USER: {\n      reducer: (_, { payload }) => Map(payload)\n    }\n  }\n}","export default function updateStore ({ persistor, store, actions }) {\n  // Data structure upgrade\n  // store.dispatch(actions.__UPGRADE_DATA())\n\n  // Data version upgrade\n  // store.dispatch(actions.__UPGRADE_VERSION())\n}\n","import * as reduxConfig from './config'\n\nexport const config = reduxConfig\nexport { default as updateStore } from './updateStore'\n","import qs from 'qs'\nimport redux from '@obsidians/redux'\n\nclass HttpClient {\n  constructor (serverUrl) {\n    this.apiBaseUrl = `${serverUrl}/api/v1`\n  }\n\n  async get (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'GET', params)\n  }\n\n  async post (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'POST', params)\n  }\n\n  async put (apiPath, params) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'PUT', params)\n  }\n\n  async delete (apiPath) {\n    return this.request(`${this.apiBaseUrl}/${apiPath}`, 'DELETE')\n  }\n\n  loggedIn () {\n    return !!redux.getState().user.get('token')\n  }\n\n  async request (endpoint, method, params) {\n    const headers = {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    }\n    const token = redux.getState().user.get('token')\n    if (token) {\n      headers.Authorization = `Bearer ${token}`\n    }\n    const opts = { headers, method }\n    if (method === 'POST' || method === 'PUT' || method === 'DELETE') {\n      if (params instanceof FormData) {\n        opts.body = params\n        delete headers['Content-Type']\n      } else {\n        opts.body = JSON.stringify(params)\n      }\n    } else if (method === 'GET' && params) {\n      endpoint += `?` + qs.stringify(params)\n    }\n\n    const response = await fetch(endpoint, opts)\n\n    let result = await response.text()\n    try {\n      result = JSON.parse(result)\n    } catch (e) {}\n\n    if (response.status === 401) {\n      redux.dispatch('USER_LOGOUT')\n      throw new Error(result.message || 'Need login to perform this operation.')\n    } else if (response.status >= 400) {\n      throw new Error(result.message || result)\n    }\n    return result\n  }\n}\n\nexport default new HttpClient(process.env.REACT_APP_SERVER_URL)","import React, { PureComponent, lazy } from 'react'\n\nimport redux, { Provider } from '@obsidians/redux'\n\nimport { config, updateStore } from '@/redux'\nimport api from '@/api'\n\nimport LoadingScreen from '~/common/LoadingScreen'\n\nconst Pages = lazy(() => import('./Pages' /* webpackChunkName: \"components\" */))\n\nexport default class ReduxApp extends PureComponent {\n  state = {\n    loaded: false,\n  }\n\n  async componentDidMount () {\n    await redux.init(config, updateStore).then(onReduxLoaded)\n    await new Promise(resolve => setInterval(resolve, 1000))\n    this.setState({ loaded: true })\n  }\n\n  render () {\n    if (!this.state.loaded) {\n      return <LoadingScreen />\n    }\n\n    return (\n      <Provider store={redux.store}>\n        <div className='body'>\n          <Pages />\n        </div>\n      </Provider>\n    )\n  }\n}\n\nasync function onReduxLoaded (state) {\n  redux.dispatch('SET_VERSION', { version: '0.1.0' })\n  const user = await api.get('user', { id: 'xxx' })\n  redux.dispatch('SET_USER', user)\n}\n"],"sourceRoot":""}